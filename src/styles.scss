::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--card); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb {
    background: var(--border); 
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--muted);
}

:root{
  --bg:#0f1115;
  --card:#151a22;
  --text:#e8ecf3;
  --muted:#97a3b6;
  --border:#263044;
  --accent:#7c5cff;
  --accent-dark: #6347d4; 
  --danger:#ff5573;
  --success:#28a745; 
  --success-dark: #1e7e34; 
  --radius: 20px;
  --text-rgb: 232, 236, 243;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  color:var(--text);
  background: var(--bg);
}

.page{
  min-height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
}

.card{
  background: rgba(21,26,34,.92);
  border:1px solid rgba(38,48,68,.8);
  border-radius:var(--radius);
  padding:22px;
  box-shadow: 0 18px 40px rgba(0,0,0,.35);
}

.auth{
  width:min(460px, 94vw);
}

.brand{
  display:flex;
  gap:12px;
  align-items:center;
  margin-bottom:14px;
}
.brand__logo{font-size:28px}
.brand__name{margin:0; font-size:26px; letter-spacing:.4px}

.muted{color:var(--muted)}
.small{font-size:12px}

.form{display:grid; gap:12px; margin-top:10px}
.field{display:grid; gap:6px}
.field span{font-size:12px; color:var(--muted)}

/* Стилі для інпутів на сторінці Login/Auth */
input, textarea {
  padding:10px 12px;
  border-radius: 20px; 
  border:1px solid rgba(38,48,68,.9);
  background: rgba(10,12,16,.55);
  color:var(--text);
  outline:none;
}
input:focus, textarea:focus{border-color: rgba(124,92,255,.9)}

input[type="checkbox"] {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-color: var(--border);
    margin: 0;
    font: inherit;
    color: currentColor;
    width: 1em;
    height: 1em;
    border: 1px solid var(--muted);
    border-radius: 3px;
    cursor: pointer;
    display: grid;
    place-content: center;
}

input[type="checkbox"]:checked {
    background-color: var(--accent);
    border-color: var(--accent);
}

input[type="checkbox"]::before {
    content: "✓"; 
    font-size: 0.8em;
    color: var(--text);
    transform: scale(0);
    transition: transform 0.1s ease-in-out;
}

input[type="checkbox"]:checked::before {
    transform: scale(1);
}


.btn{
  padding:11px 14px;
  border-radius:4px;
  border:1px solid rgba(38,48,68,.9);
  background: rgba(21,26,34,.7);
  color:var(--text);
  cursor:pointer;
  transition: background-color 0.2s, border-color 0.2s;
}
.btn--primary{
  background: linear-gradient(180deg, rgba(124,92,255,.95), rgba(124,92,255,.65));
  border-color: rgba(124,92,255,.9);
}
.btn:hover {
    background: rgba(21,26,34, 1);
    border-color: var(--accent);
}
.btn--primary:hover {
    background: linear-gradient(180deg, rgba(124,92,255,1), rgba(124,92,255,.75));
    border-color: rgba(124,92,255,1);
}

.alert{
  margin:10px 0 0;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,85,115,.8);
  color:#ffd7de;
  background: rgba(255,85,115,.08);
}

.brand__img {
  width: 48px;
  height: 48px;
  object-fit: contain;
  margin-right: 8px;
}

.auth h2 {
  margin: 0 0 8px;
}

.switch {
  margin-top: 10px;
  font-size: 13px;
  color: var(--muted);
}

.switch button {
  background: none;
  border: none;
  color: var(--accent);
  cursor: pointer;
  padding: 0;
  font-weight: 600;
}

.hidden {
  display: none;
}

// --- НОВІ СТИЛІ ДЛЯ СТОРІНКИ ПЕРСОНАЖІВ (Page 2) ---

.characters-page{
  width: min(1200px, 100%);
  max-width: 100%;
  padding: 24px;
}

.page-header{
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 24px;
  flex-wrap: wrap;
  gap: 16px;

  .brand {
    margin: 0; 
  }
}

.page-title {
  margin: 0;
  font-size: 26px;
}

.char-list {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
  padding: 0;
  margin: 0;
  list-style: none;
}

.char-card {
  display: flex;
  flex-direction: column;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  text-decoration: none;
  color: var(--text);
  transition: transform 0.2s, box-shadow 0.2s, border-color 0.2s;
  min-height: 250px;
}

.char-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
  border-color: var(--accent);
}

.char-card__image-container {
  height: 150px;
  overflow: hidden;
  background: #1e2634;
}

.char-card__image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.char-card__info {
  padding: 16px;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.char-card__name {
  margin: 0 0 4px;
  font-size: 18px;
  font-weight: 600;
}

.char-card__details {
  font-size: 14px;
}

/* New character card styling */
.char-card--new {
  align-items: center;
  justify-content: center;
  text-align: center;
  border-style: dashed;
  opacity: 0.7;
}

.char-card--new:hover {
  opacity: 1;
}

.char-card__icon-container {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: rgba(124,92,255,.1);
  margin-bottom: 12px;
}

.char-card__icon {
  font-size: 32px;
  color: var(--accent);
  line-height: 1;
}

.page-footer {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
}

.btn--secondary {
  background: var(--card);
  border-color: var(--border);
}

.btn--secondary:hover {
  background: rgba(21,26,34, 1);
  border-color: var(--accent);
}

input[type=number] {
  -moz-appearance: textfield; 
  appearance: textfield;
}

input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input, textarea {
    color: var(--text); 
    border-radius: 4px;
}

/* ------------------- ЛИСТ ПЕРСОНАЖА (PAGE 3) - СТИЛЬ LSS ------------------- */

.character-sheet-page {
  .page {
    align-items: flex-start;
    padding: 30px 15px; 
  }
}

.character-sheet {
  width: 100%;
  max-width: 1400px; 
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
  padding: 25px;
}

/* ------------------- НАВІГАЦІЯ ТА HEADER ------------------- */
.btn--back {
    margin-bottom: 15px; 
    display: inline-block;
    padding: 6px 12px;
    font-size: 14px;
}

.sheet-header {
  display: grid; 
  grid-template-columns: 120px 1fr; 
  align-items: flex-start; 
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
  gap: 10px 20px;
}

/* Контейнер для зображення та його контролів */
.header__image-container {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    
    .header__image {
        width: 100px; 
        height: 100px;
        border-radius: 50%; 
        border: 3px solid var(--accent); 
        overflow: hidden;
        position: relative; 
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        
        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        .btn--edit-image {
            position: absolute;
            top: 0;
            right: 0;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid var(--border);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            transition: background 0.2s;
        }
        .btn--edit-image:hover {
            background: var(--accent);
        }
    }

    /* Поля редагування URL */
    .image-edit-controls {
        width: 300px; 
        padding: 10px;
        background: var(--card);
        border: 1px solid var(--accent);
        border-radius: 4px;
        margin-top: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: column; 
        gap: 5px;
        z-index: 20;
        
        input {
            flex-grow: 1;
            padding: 5px;
            border: 1px solid var(--border);
            background: rgba(10, 12, 16, 0.5);
            font-size: 12px;
        }
        #save-image-url {
            background: var(--accent);
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 12px;
        }
    }
    .hidden {
        display: none !important;
    }
}

.header__main-info {
    display: flex;
    flex-direction: column;
}

.header__name {
  display: flex;
  flex-direction: column; 
  
  .name-field {
    font-size: 32px;
    font-weight: 700;
    border: none;
    border-bottom: 2px solid var(--accent);
    background: transparent;
    padding: 0 0 5px 0;
    margin: 0;
    color: var(--text);
    text-align: left;
  }
  
  .name-label {
    font-size: 10px;
    color: var(--muted);
    text-transform: uppercase;
    margin-top: 5px; 
  }
}

.header__details {
  grid-column: 2 / span 1; 
  display: grid;
  grid-template-columns: repeat(2, minmax(100px, 1fr)); 
  gap: 10px 15px; 
  margin-top: 15px; 
}


/* ------------------- MAIN CONTENT (3 COLUMNS) ------------------- */
.sheet-main {
  display: grid;
  grid-template-columns: 220px 1fr 1fr; 
  gap: 20px;

  @media (max-width: 1100px) {
    grid-template-columns: 220px 1fr; 
  }

  @media (max-width: 700px) {
    grid-template-columns: 1fr; 
  }
}
.column {
  h2 {
    font-size: 14px;
    margin: 0 0 10px;
    padding-bottom: 5px;
    border-bottom: 1px solid var(--accent); 
    color: var(--accent);
    text-transform: uppercase;
  }
  .h2--compact {
    margin-top: 20px; 
  }
  
  /* >>> ПРАВИЛЬНІ СТИЛІ ДЛЯ TEXTAREA (ЯК ЧИСТИЙ БЛОК) <<< */
  textarea, pre {
    width: 100%;
    min-height: 50px;
    padding: 10px; 
    border: 1px solid var(--border); 
    background: rgba(10, 12, 16, 0.4);
    border-radius: 4px;
    resize: vertical;
    font-size: 14px;
    white-space: pre-wrap;
    line-height: 1.5; 
  }

  textarea:focus {
    border-color: var(--accent);
    background: rgba(10, 12, 16, 0.6);
  }

  .textarea--tall {
    min-height: 140px;
  }
  .textarea--short {
    min-height: 60px;
  }
  
  .role-group {
    margin-bottom: 15px;
    label {
        display: block;
        color: var(--accent);
        font-size: 11px;
        text-transform: uppercase;
        margin-bottom: 3px;
    }
  }
}

/* ------------------- ABILITY SCORES (COL 1) ------------------- */
.stat-item--pb {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 10px;
    border: 1px solid var(--border);
    border-radius: 8px;
    background: rgba(124, 92, 255, 0.1); 
    margin-bottom: 10px;
    
    .stat-value {
        font-size: 24px;
        font-weight: 700;
        line-height: 1;
        color: var(--danger); 
    }
    label {
        font-size: 10px;
        color: var(--muted);
        text-transform: uppercase;
        margin-top: 4px;
    }
}
.stat-item--inspiration-top {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    border: 1px solid var(--border);
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.1);
    margin-bottom: 15px;
    
    input[type="checkbox"] {
        width: 18px;
        height: 18px;
        margin-right: 10px;
        cursor: pointer;
    }
    label {
        font-size: 12px;
        color: var(--accent);
        font-weight: 600;
    }
}

.ability-scores {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-bottom: 20px;
}

.ability-score {
  display: grid;
  grid-template-columns: 1fr;
  gap: 5px;
  padding: 8px;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: rgba(0, 0, 0, 0.1);

  label:first-child {
    font-size: 9px;
    font-weight: 700;
    text-transform: uppercase;
    color: var(--muted);
    text-align: center;
  }
  
  .ability-score__modifier {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 5px;
    
    input[type="number"] {
        width: 35px;
        font-size: 20px;
        font-weight: 900;
        text-align: right;
        padding: 0;
        background: transparent;
        border: none;
        color: var(--text); 
    }

    & > div { 
        font-size: 18px;
        font-weight: 700;
        color: var(--accent);
        width: 30px;
        text-align: left;
    }
  }

  &__saves {
    padding-top: 5px;
    border-top: 1px dashed var(--border);
  }
  
  &__skills {
    padding-top: 5px;
    border-top: 1px dashed var(--border);
  }
}

.save-throw, .skill-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 11px;
  line-height: 1.4;
  color: var(--text);
  padding: 1px 0;
  
  input[type="checkbox"] {
    margin-right: 5px;
    width: 11px;
    height: 11px;
    min-width: 11px;
    cursor: pointer; 
  }

  &__name {
      display: flex;
      align-items: center;
  }

  &__bonus {
    font-weight: 700;
    margin-left: 5px;
    min-width: 25px;
    text-align: right;
    color: var(--text);
  }
}
.save-throw {
    font-weight: 600;
    color: var(--accent);
}

/* ------------------- COMBAT & HP BLOCKS (COL 2) ------------------- */

.combat-stats-top-row {
    display: flex;
    gap: 20px;
    margin-bottom: 25px;
    flex-wrap: wrap; 
}

.hp-block {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    flex-grow: 1; 
    
    input {
        height: 40px;
        padding: 4px 4px;
        text-align: center;
        font-size: 16px;
        font-weight: 600;
        border: 1px solid var(--border);
        background: rgba(10, 12, 16, 0.55);
    }
    label {
        font-size: 9px;
        color: var(--muted);
        margin-bottom: 2px;
        text-transform: uppercase;
    }
}

.stat-block--combat {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    max-width: 300px; 
    
    .stat-item {
        padding: 8px;
        background: rgba(0, 0, 0, 0.1);
        border: 1px solid var(--border);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        
        label {
            margin-top: 2px;
        }
    }
    
    .stat-value {
        height: 35px;
        text-align: center;
        font-size: 20px;
        font-weight: 700;
        padding: 4px;
        background: rgba(10, 12, 16, 0.55);
        border: 1px solid var(--border);
    }
}

.passive-perception-block {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 10px;
    border: 1px solid var(--border);
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
    
    .stat-value {
        font-size: 20px;
        font-weight: 700;
        color: var(--accent);
    }
    
    label {
        font-size: 9px;
        color: var(--muted);
        text-transform: uppercase;
    }
}

.sheet-footer {
    padding-top: 20px;
    text-align: center;
}

.weapons-table table {
    width: 100%;
    border-collapse: collapse;
    margin-bottom: 10px;
    font-size: 13px;
    
    th {
        text-transform: uppercase;
        font-size: 10px;
        color: var(--muted);
        padding: 5px 5px;
        border-bottom: 1px solid var(--border);
    }
    td {
        padding: 2px 5px;
        position: relative; 
        border-bottom: 1px dashed rgba(var(--text-rgb), 0.1);
    }
    
    input[type="text"], input[type="number"] {
        width: 100%;
        border: none;
        background: transparent;
        padding: 3px 0;
        font-size: 13px;
    }
    input[readonly] {
        color: var(--accent);
        font-weight: 700;
    }
}

.weapons-table .btn--add-weapon {

    @extend .btn; 
    
    display: block;
    width: 100%;
    padding: 8px;
    margin-top: 10px;
    background: var(--success); 
    color: white;
    border: 1px solid var(--success);
    border-radius: 4px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.2s;
    background: var(--success); 
    border-color: var(--success);
}
.weapons-table .btn--add-weapon:hover {
    background: var(--success-dark); 
    border-color: var(--success-dark);
}

.weapons-table .btn--remove-weapon {
    position: absolute;
    right: 5px;
    top: 50%;
    transform: translateY(-50%);
    width: 18px; 
    height: 18px; 
    border-radius: 20%; 
    background: var(--danger); 
    color: white;
    border: none;
    cursor: pointer;
    font-size: 12px; 
    font-weight: 700;
    line-height: 1;
    opacity: 0.8;
    transition: opacity 0.2s, background-color 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
}
.weapons-table .btn--remove-weapon:hover {
    opacity: 1;
    background: #c9304c; 
}

.money-block {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 15px;
    
    .money-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 8px;
        border: 1px solid var(--border);
        border-radius: 4px;
        background: rgba(0, 0, 0, 0.1);
        
        input {
            font-size: 16px;
            font-weight: 700;
            text-align: center;
            width: 100%;
            border: none;
            background: transparent;
        }
        label {
            font-size: 9px;
            color: var(--muted);
            text-transform: uppercase;
        }
    }
}